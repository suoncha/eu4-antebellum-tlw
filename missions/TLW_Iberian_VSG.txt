visigoths_first = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = VSG
			was_tag = VSG
		}
		has_country_flag = ab_missionswitch_rome_default
	}
	has_country_shield = yes

	vsg_cordoba_control = {
	    icon = mission_cordoba
		required_missions = { }
		position = 1
		
		provinces_to_highlight = {
			province_id = 225
		}

		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				is_year = 1450
			}
			else = {
				owns_core_province = 225
			}
		}
		
		effect = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				iberia_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_territorial_core = ROOT
				}
				ADU = {
					every_owned_province = {
						limit = {
							OR = {
								area = extremadura_area
								area = alentejo_area
								area = lower_andalucia_area
							}
							NOT = { province_id = 225 }
							NOT = { province_id = 1748 }
						}
						add_core = BTW
					}
					release = BTW
					BTW = {
						change_government = monarchy
						add_government_reform = iqta
						capital_scope = {
							build_to_forcelimit = {
								infantry = 0.6
								cavalry = 0.3
							}
						}
						random_owned_province = {
							limit = {
								has_port = yes
							}
							build_to_forcelimit = {
								galley = 0.3
								light_ship = 0.3
								transport = 0.2
							}
						}
					}
					every_owned_province = {
						limit = {
							OR = {
								area = valencia_area
								area = baleares_area
								area = toledo_area
								province_id = 1748
							}
						}
						add_core = BLS
					}
					release = BLS
					BLS = {
						change_government = monarchy
						add_government_reform = iqta
						capital_scope = {
							build_to_forcelimit = {
								infantry = 0.6
								cavalry = 0.3
							}
						}
						random_owned_province = {
							limit = {
								has_port = yes
							}
							build_to_forcelimit = {
								galley = 0.3
								light_ship = 0.3
								transport = 0.2
							}
						}
					}
				}
			}
			else = {
				country_event = {
					id = ab_byzantium.98
				}
			}
		}
	}

	vsg_finish_reconquista = {
	    icon = mission_reclaim_andalucia
		required_missions = { vsg_cordoba_control }
		position = 3

		ai_weight = {
			factor = 1000
		}
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				upper_andalucia_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				lower_andalucia_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			else = {
				upper_andalucia_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				lower_andalucia_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = lower_andalucia_area
				area = upper_andalucia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			set_country_flag = vsg_spread_iberia
			custom_tooltip = VSG_CULTURE_SPREAD_IBERIA
			hidden_effect = {
				iberia_region = {
					limit = {
						owned_by = ROOT
					}
					TLW_culture_conversion_calc_effect = yes
				}
			}
			custom_tooltip = AB_EMPTY
			custom_tooltip = IBE_CONVERT_IBERIA
			hidden_effect = {
				iberia_region = {
					limit = {
						religion = sunni
					}
					add_province_modifier = {
						name = ibe_finish_reconquista_convert
						duration = -1
					}
				}
			}
			custom_tooltip = AB_EMPTY
			northern_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				maghreb_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_convert = {
		icon = show_piety
		required_missions = { vsg_finish_reconquista }
		position = 4

		provinces_to_highlight = {
			region = iberia_region
			NOT = { religion_group = ROOT }
		}

		trigger = {
			iberia_region = {
				type = all
				religion_group = ROOT
			}
		}
		
		effect = {
			add_country_modifier = {
				name = ibe_cleansed
				duration = 5475
			}
			set_country_flag = vsg_religious_culture_buff
			custom_tooltip = VSG_RELIGIOUS_CULTURE_PRIVILEGE
			custom_tooltip = AB_EMPTY
			custom_tooltip = FIVE_RANDOM_PROVINCES
			tooltip = {
				add_or_upgrade_tax_building = yes
			}
			hidden_effect = {
				for = {
                    amount = 5
                    effect = "
                        random_owned_province = {
							add_or_upgrade_tax_building = yes
                        }
                    "
                }
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					accepted_culture = andalucian
				}
				custom_tooltip = VSG_ACCEPTED_ANDALUSIAN_YES
				hidden_effect = {
					add_dip_power = 100
				}
			}
			else = {
				custom_tooltip = VSG_ACCEPTED_ANDALUSIAN_NO
			}
			tooltip = {
				add_dip_power = 100
				custom_tooltip = EVERY_ANDALUSIAN_PROVINCE
			}
		}
	}
			
	vsg_pirates = {
		icon = mission_combat_barbary_piracy
		position = 6
		required_missions = { vsg_invade_morocco }
		
		trigger = {
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
				area = southern_morocco_area
				area = sus_area
				area = tafilalt_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_mercantilism_or_monarch_power = { amount = 5 }
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = ibe_defeated_pirates
				duration = 7300
			}
			define_advisor = {
				type = trader
				skill = 3
				cost_multiplier = 0.25
			}
		}
	}

	vsg_rule_maghreb = {
	    icon = mission_moroccan_ports
		required_missions = { vsg_pirates vsg_vandals }
		position = 7
		
		trigger = {
			overlord_of = VSV
			kabylia_area = {
			    type = all
				owned_by = VSV
			}
		    barbary_coast_area = {
			    type = all
				owned_by = VSV
			}
		    djerba_area = {
			    type = all
				owned_by = VSV
			}
		    tripolitania_area = {
			    type = all
				owned_by = VSV
			}
		    4562 = { owned_by = VSV }
		}
		
		provinces_to_highlight = {
			OR = {
				area = kabylia_area
				area = barbary_coast_area
				area = djerba_area
				area = tripolitania_area
				province_id = 4562
			}
			NOT = { owned_by = VSV }
		}
		
		effect = {
			add_army_tradition_or_mil_power = { amount = 20 }
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = ibe_continuing
				duration = 5475
			}
			maghreb_region = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_province_modifier = {
					name = vsg_convert_the_berbers
					duration = 7300
				}
			}
			maghreb_region = {
				limit = {
					NOT = { is_permanent_claim = VSV }
					NOT = { is_core = VSV }
				}
				add_permanent_claim = VSV
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 25
						region = maghreb_region
					}
				}
				custom_tooltip = VSG_OWN_25_MAGHREB_YES
				add_country_modifier = {
					name = vsg_vandalic_elites
					duration = -1
				}
			}
			else = {
				custom_tooltip = VSG_OWN_25_MAGHREB_NO
				tooltip = {
					add_country_modifier = {
						name = vsg_vandalic_elites
						duration = -1
					}
				}
			}
		}
	}

	vsg_new_dockyard = {
	    icon = toulon_dockyards
		required_missions = { }
		position = 8
		
		provinces_to_highlight = {
			province_id = 227
		}
		
		trigger = {
			227 = {
				has_shipyard_building_trigger = yes
				has_dock_building_trigger = yes
			}
		}
		
		effect = {
			create_explorer = { tradition = 50 }
			add_country_modifier = {
				name = search_for_avalon
				duration = 5475
			}
			227 = {
				add_province_modifier = {
					name = ibe_new_world_dock
					duration = -1
				}
				add_unit_construction = {
					type = heavy_ship
					amount = 5
					speed = 1
					cost = 0
				}
			}
		}
	}

	vsg_countryside = {
	    icon = mission_farm
		required_missions = { vsg_new_dockyard }
		position = 9
		
		provinces_to_highlight = {
			region = iberia_region
			owned_by = ROOT
			NOT = { development = 15 }
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				region = iberia_region
				development = 15
				value = 15
			}
		}
		
		effect = {
			add_splendor = 200
			add_country_modifier = {
				name = ibe_development
				duration = 10950
			}
			define_advisor = {
				type = planner
				skill = 2
				cost_multiplier = 0.5
			}
		}
	}

	vsg_industrialize_iberia = {
	    icon = industrialized_rhineland
		required_missions = { vsg_countryside }
		position = 11
		
		provinces_to_highlight = {
			region = iberia_region
			owned_by = ROOT
			OR = {
				has_manufactory_trigger = no
				has_production_building_trigger = no
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_manufactory_trigger = yes
				has_production_building_trigger = yes
				region = iberia_region
			}
		}
		
		effect = {
			add_years_of_income = 2
			iberia_region = {
				add_province_modifier = {
					name = vsg_iberia_industry 
					duration = -1 
				}
			}
			set_country_flag = rhl_unlock_planner_bonus
			custom_tooltip = RHL_SCALING_PLANNER
		}
	}
}

visigoths_second = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = VSG
			was_tag = VSG
		}
		has_country_flag = ab_missionswitch_rome_default
	}
	has_country_shield = yes
	
	vsg_revitalize_economy = {
		icon = mission_african_gold
		required_missions = { vsg_cordoba_control }
		position = 2
		
		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				has_tax_building_trigger = no
				has_production_building_trigger = no
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 7
				has_tax_building_trigger = yes
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			add_stability_or_adm_power = yes
			add_country_modifier = {
				name = ibe_revitalized
				duration = 9125
			}
			custom_tooltip = EVERY_CHURCH_PROVINCE
			tooltip = {
				add_or_upgrade_production_building = yes
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						has_tax_building_trigger = yes
					}
					add_or_upgrade_production_building = yes
				}
			}
		}
	}
		
	vsg_capital = {
	    icon = mission_golden_century
		required_missions = { vsg_finish_reconquista vsg_revitalize_economy }
		position = 4
		
		provinces_to_highlight = {
			province_id = 219
		}

		trigger = {
			219 = { development = 30 }
			219 = { has_tax_building_trigger = yes }
			219 = { has_production_building_trigger = yes }
			219 = { has_trade_building_trigger = yes }
		}
		
		effect = {
			219 = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
				move_capital_effect = yes
				change_culture = ROOT
				add_province_modifier = {
					name = ibe_new_capital
					duration = -1
				}
			}
			225 = {
				add_great_project_tier = {
					type = alhambra
					tier = 1
				}
			}
			217 = {
				add_great_project_tier = {
					type = el_escorial
					tier = 1
				}
			}
		}
	}
	
	vsg_invade_morocco = {
	    icon = mission_retake_ceuta
		required_missions = { }
		position = 5

		ai_weight = {
			factor = 1000
		}
		
		trigger = {
		    northern_morocco_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		provinces_to_highlight = {
			area = northern_morocco_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			create_admiral = { tradition = 75 }
			add_country_modifier = {
				name = ibe_africa
				duration = 9125
			}
			tunisia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			western_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			marrekesh_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			southern_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sus_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				maghreb_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_vandals = {
		icon = africa_proconsulare
		required_missions = { vsg_invade_morocco }
		position = 6
	
		trigger = {
			tunisia_area = {
				type = all
				owned_by = ROOT	
			}
		}
		
		provinces_to_highlight = {
			area = tunisia_area
			NOT = { owned_by = ROOT }
		}
		
		effect = {
			custom_tooltip = VSG_RELEASE_VANDALS
			hidden_effect = {
				maghreb_region = {
					limit = {
						owned_by = ROOT
					}
					remove_core = ROOT
					add_core = VSV
				}
				release = VSV
				VSV = {
					change_primary_culture = ROOT
					change_religion = ROOT
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
					}
					add_government_reform = visigothic_kingdom
					change_technology_group = western
					change_unit_type = western
					set_capital = 341
				}
				create_union = VSV
			}
			custom_tooltip = AB_EMPTY
			set_country_flag = lat_burgher_force_draft_buff
			custom_tooltip = LAT_BURGHER_FORCE_DRAFT_PRIVILEGE
			custom_tooltip = AB_EMPTY
			egypt_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			barbary_coast_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			djerba_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tripolitania_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			4562 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_egypt = {
		icon = mission_nizzarid
		required_missions = { vsg_vandals }
		position = 8
		
		ai_weight = {
			factor = 1000
		}
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 15
					region = egypt_region
				}
			}
			else = {
				358 = { religion = catholic }
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 25
					region = egypt_region
				}
			}
		}
		
		provinces_to_highlight = {
			OR = {
				AND = {
					region = egypt_region
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					province_id = 358
					NOT = { religion = catholic }
				}
			}
			has_discovered = ROOT
		}
		
		effect = {
			country_event = {
				id = ab_latin.3
			}
			custom_tooltip = AB_EMPTY
			dongola_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			1232 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			2324 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_universities = {
		icon = pontifical_universities
		required_missions = { vsg_countryside }
		position = 10
		
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { has_building = university }
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_building = university
			}
		}
		
		effect = {
			change_innovativeness = 5
			add_country_modifier = {
				name = lat_catholic
				duration = -1
			}
			custom_tooltip = TUS_TAKING_TECH_GRANT_APC
			set_country_flag = ab_tus_taking_tech_bonus
		}
	}
}

visigoths_third = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = VSG
			was_tag = VSG
		}
		has_country_flag = ab_missionswitch_rome_default
	}
	has_country_shield = yes

	vsg_secure_baleares = {
	    icon = mission_feodosia_port
		required_missions = { }
		position = 1
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				is_year = 1450
			}
			else = {
				baleares_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		provinces_to_highlight = {
			area = baleares_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_navy_tradition = 10
			333 = {
				add_province_modifier = {
					name = vsg_balearic_naval_base
					duration = -1
				}
				add_or_upgrade_shipyard_building = yes
				custom_tooltip = AB_EMPTY
				add_or_upgrade_dock_building = yes
			}
			custom_tooltip = AB_EMPTY
		    corsica_sardinia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
		
	vsg_take_isles = {
	    icon = seize_sardinia
		required_missions = { vsg_secure_baleares }
		position = 2
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				corsica_sardinia_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			else = {
				corsica_sardinia_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		provinces_to_highlight = {
			area = corsica_sardinia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_country_modifier = {
				name = ibe_authority
				duration = 7300
			}
			2986 = {
				add_unit_construction = {
					type = galley
					amount = 10
					speed = 0.25
					cost = 0
				}
			}
			custom_tooltip = AB_EMPTY
		    naples_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    calabria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    apulia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    sicily_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    western_sicily_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				italy_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	
	vsg_dismantle_sultanate = {
	    icon = per_unify_the_shia_realms
		required_missions = { vsg_take_isles }
		position = 3

		trigger = {
		    sicily_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    western_sicily_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    naples_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    calabria_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    apulia_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = western_sicily_area
				area = sicily_area
				area = naples_area
				area = calabria_area
				area = apulia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			country_event = {
				id = ab_lombardy.4
			}
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = ibe_liberator_of_italy
				duration = 9125
			}
			central_italy_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lazio_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_rome = {
		icon = mission_colosseum
		required_missions = { vsg_dismantle_sultanate vsg_po_valley }
		position = 5

		ai_weight = {
			factor = 1000
		}
		
		provinces_to_highlight = {
			province_id = 118
		}

		trigger = {
			118 = {
				owned_by = ROOT
			}
		}
		
		effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 15
			}
			set_country_flag = general_flag_Rome_flag
			add_country_modifier = {
				name = ab_rome_liberation
				duration = -1
			}
			custom_tooltip = VSG_RELEASE_OSTROGOTHS
			hidden_effect = {
				italy_region = {
					limit = {
						owned_by = ROOT
					}
					remove_core = ROOT
					add_core = VSO
				}
				release = VSO
				VSO = {
					change_primary_culture = ROOT
					change_religion = ROOT
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
					}
					add_government_reform = visigothic_kingdom
					change_technology_group = western
					change_unit_type = western
					set_capital = 118
					set_country_flag = general_flag_Rome_flag
					add_country_modifier = {
						name = ab_rome_liberation
						duration = -1
					}
				}
				create_union = VSO
			}
			custom_tooltip = AB_EMPTY
			italy_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = AB_EMPTY
			custom_tooltip = WLS_OCCUPATION
		}
	}

	vsg_italy = {
		icon = mission_rule_italy
		required_missions = { vsg_rome }
		position = 6
		
		trigger = {
			overlord_of = VSO
			italy_region = {
				type = all
				owned_by = VSO
			}
		}
		
		provinces_to_highlight = {
			region = italy_region
			NOT = { owned_by = VSO }
		}
		
		effect = {
			add_country_modifier = {
				name = vsg_ostrogothic_italy
				duration = -1
			}
			unlock_government_reform = {
				government_reform = visigothic_empire
			}
			custom_tooltip = AB_EMPTY
			add_government_reform = visigothic_empire
			custom_tooltip = AB_EMPTY
			palestine_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			trans_jordan_area = {
			    limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    syria_area = {
			    limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    syrian_desert_area = {
			    limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    aleppo_area = {
			    limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_palestine = {
		icon = jerusalem
		required_missions = { vsg_italy }
		position = 7

		ai_weight = {
			factor = 1000
		}
		
		trigger = {
		    palestine_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    trans_jordan_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    syria_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    syrian_desert_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    aleppo_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = palestine_area
				area = trans_jordan_area
				area = syria_area
				area = syrian_desert_area
				area = aleppo_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			country_event = {
				id = ab_byzantium.97
			}
			custom_tooltip = AB_EMPTY
			mashriq_region = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_province_modifier = {
					name = rum_c_triumph
					duration = 5475
				}
			}
			mashriq_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					is_defender_of_faith = yes
				}
				custom_tooltip = LAT_COT
			}
			else = {
				custom_tooltip = LAT_COT_NO
			}
			hidden_effect = {
				if = {
					limit = {
						religion = catholic
					}
					379 = {
						change_religion = ROOT
						add_reform_center = catholic
						province_event = {
							id = ab_latin.15
							days = 9125
						}
					}
				}
			}
		}
	}

	vsg_schism = {
		icon = mission_pf_cross
		required_missions = { vsg_egypt vsg_palestine }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				region = italy_region
				region = iberia_region
				region = balkan_region
				region = anatolia_region
				region = egypt_region
				area = palestine_area
				area = syria_area
				area = aleppo_area
			}
			NOT = { religion = catholic }
		}
		
		trigger = {
			tag = ROM
			OR = {
				is_papal_controller = yes
				NOT = { exists = PAP }
			}
			papal_influence = 100
			italy_region = {
				type = all
				religion = catholic
			}
			iberia_region = {
				type = all
				religion = catholic
			}
			balkan_region = {
				type = all
				religion = catholic
			}
			anatolia_region = {
				type = all
				religion = catholic
			}
			egypt_region = {
				type = all
				religion = catholic
			}
			palestine_area = {
				type = all
				religion = catholic
			}
			syria_area = {
				type = all
				religion = catholic
			}
			aleppo_area = {
				type = all
				religion = catholic
			}
		}
		
		effect = {
			add_prestige_or_monarch_power = { amount = 50 }
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = pap_schism_mended
				duration = 18250
			}
			custom_tooltip = PAP_SCHISM_TOOLTIP
			hidden_effect = {
				every_country = {
					limit = {
						religion = orthodox
					}
					country_event = {
						id = flavor_pap.11
					}
				}
			}
			custom_tooltip = AB_EMPTY
			ruthenia_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_claim = ROOT
			}
			russia_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_claim = ROOT
			}
			custom_tooltip = LAT_ORTHODOX_CLAIMS
			hidden_effect = {
				every_province = {
					limit = {
						religion = orthodox
					}
					add_claim = ROOT
				}
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					exists = UKR
				}
				custom_tooltip = UKR_EXIST_YES
				add_casus_belli = {
					target = UKR
					type = cb_establish_diocese
					months = 300
				}
			}
			else = {
				custom_tooltip = UKR_EXIST_NO
				tooltip = {
					add_casus_belli = {
						target = UKR
						type = cb_establish_diocese
						months = 300
					}
				}
			}
		}
	}

	vsg_rus_union = {
		icon = mission_rule_ruthenia
		position = 10
		required_missions = { vsg_schism }

		provinces_to_highlight = {
			OR = {
				province_id = 280
				province_id = 295
				province_id = 310
				if = {
					limit = {
						exists = UKR
					}
					owned_by = UKR
				}
				else = {
					owner = {
						culture_group = east_slavic
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			owns_or_non_sovereign_subject_of = 280
			owns_or_non_sovereign_subject_of = 295
			owns_or_non_sovereign_subject_of = 310
			if = {
				limit = {
					exists = UKR
				}
				UKR = {
					is_subject_of = ROOT
					has_opinion = {
						who = ROOT
						value = 200
					}
					NOT = { liberty_desire = 50 }
				}
			}
			else = {
				calc_true_if = {
					all_subject_country = {
						culture_group = east_slavic
						has_opinion = {
							who = ROOT
							value = 200
						}
						NOT = { liberty_desire = 50 }
					}
					amount = 3
				}
			}
		}

		effect = {
			custom_tooltip = AB_DIOCESE_RUSSIA_CB
			add_country_modifier = {
				name = byz_rus_tsar
				duration = -1
			}
			custom_tooltip = BYZ_UNION_25_YEARS
			tooltip = {
				country_event = {
					id = ab_byzantium.65
				}
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					NOT = {
						exists = UKR
					}
					calc_true_if = {
						all_subject_country = {
							culture_group = east_slavic
							is_subject_of = ROOT
						}
						amount = 3
					}
				}
				custom_tooltip = BYZ_UNION_PRINCES_YES
			}
			else = {
				custom_tooltip = BYZ_UNION_PRINCES_NO
			}
			hidden_effect = {
				TLW_establish_diocese_russia_effect = yes
				country_event = {
					id = ab_byzantium.65
					days = 9125
				}
			}
		}
	}
}

visigoths_fourth = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = VSG
			was_tag = VSG
		}
		has_country_flag = ab_missionswitch_rome_default
	}
	has_country_shield = yes

	vsg_contest_in_mediterranean = {
		icon = mission_aragonese_navy
		required_missions = { }
		position = 2
		
		provinces_to_highlight = {
			owned_by = ROOT
			has_shipyard_building_trigger = no
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_shipyard_building_trigger = yes
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vsg_rising_naval_power
				duration = 10950
			}
			set_country_flag = vsg_scaling_naval_reformer
			custom_tooltip = VSG_NAVAL_REFORMER_SCALING
		}
	}

	vsg_mare_nostrum = {
		icon = mission_mare_nostrum
		required_missions = { vsg_take_isles vsg_contest_in_mediterranean vsg_invade_francia }
		position = 3
		
		provinces_to_highlight = {
			is_capital = yes
			owner = {
				any_owned_province = {
					has_port = yes
					sea_zone = {
						OR = {
							area = western_mediterrenean_area
							area = eastern_mediterrenean_area
						}
					}
				}
				navy_size = ROOT
			}
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = AB_MARE_NOSTRUM
				NOT = {
					any_known_country = {
						any_owned_province = {
							has_port = yes
							sea_zone = {
								OR = {
									area = western_mediterrenean_area
									area = eastern_mediterrenean_area
								}
							}
						}
						navy_size = ROOT
					}
				}
			}
		}
		
		effect = {
			custom_tooltip = LOM_ADMIRAL
			set_country_flag = ab_admiral_gives_naval_tradition
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = lom_marenostrum
				duration = -1
			}
			define_advisor = {
				type = naval_reformer
				skill = 3
				cost_multiplier = 0.5
			}
		}
	}

	vsg_po_valley = {
		icon = mission_conquer_north_italy
		required_missions = { vsg_visigothic_aquitania }
		position = 4
		
		provinces_to_highlight = {
			OR = {
				area = lombardy_area
				area = piedmont_area
				area = emilia_romagna_area
				area = liguria_area 
				area = po_valley_area 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				OR = {
					area = lombardy_area
					area = piedmont_area
					area = emilia_romagna_area
					area = liguria_area 
					area = po_valley_area 
				}
			}
		}
		
		effect = {
			add_army_professionalism = 0.05
			add_country_modifier = {
				name = wls_italian_wars
				duration = 9125
			}
			custom_tooltip = BOH_HRE_AE
			hidden_effect = {
				every_country = {
					limit = {
						is_part_of_hre = yes
					}
					add_aggressive_expansion = {
						who = ROOT
						value = -20
						apply_calc = no
					}
				}
			}
			custom_tooltip = AB_EMPTY
			carinthia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			balkan_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_balkan = {
		icon = mission_balkan_conquest
		required_missions = { vsg_po_valley }
		position = 5
		
		provinces_to_highlight = {
			region = balkan_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				region = balkan_region
			}
		}
		
		effect = {
			add_army_tradition_or_mil_power = { amount = 25 }
			custom_tooltip = AB_EMPTY
			balkan_region = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_nationalism = -10
			}
			add_country_modifier = {
				name = rus_balkan_incursion
				duration = 7300
			}
			carpathia_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					exists = WAL
				}
				custom_tooltip = WAL_EXIST_YES
				add_casus_belli = {
					type = cb_vassalize_mission
					months = 300
					target = WAL
				}
			}
			else = {
				custom_tooltip = WAL_EXIST_NO
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 300
						target = WAL
					}
				}
			}
			custom_tooltip = AB_EMPTY
			if = {
				limit = {
					exists = MOL
				}
				custom_tooltip = MOL_EXIST_YES
				add_casus_belli = {
					type = cb_vassalize_mission
					months = 300
					target = MOL
				}
			}
			else = {
				custom_tooltip = MOL_EXIST_NO
				tooltip = {
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 300
						target = MOL
					}
				}
			}
		}
	}

	vsg_latin_empire = {
		icon = mission_plc_purple_phoenix
		required_missions = { vsg_italy vsg_balkan }
		position = 7
		
		provinces_to_highlight = {
			area = thrace_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			thrace_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { exists = BYZ }
			NOT = { exists = LAT }
		}

		effect = {
			country_event = {
				id = ab_jerusalem.5
			}
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = pap_patriarchates
				duration = 9125
			}
			crimea_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			anatolia_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_legacy_of_alaric = {
		icon = mission_barbarossa
		required_missions = { }
		position = 8
		
		trigger = {
			OR = {
				army_tradition = 40
				army_professionalism = 0.2
			}
			num_of_generals = 3
		}
		
		effect = {
			change_monarch_points_or_power = {
				points = 2
				power = mil
			}
			add_country_modifier = {
				name = vsg_visigothic_vanguards
				duration = -1
			}
		}
	}

	vsg_mass_mobilization = {
		icon = ven_standing_army_mission_2
		required_missions = { vsg_legacy_of_alaric }
		position = 10
		
		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				has_manpower_building_trigger = no
				has_forcelimit_building_trigger = no
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_manpower_building_trigger = yes
				has_forcelimit_building_trigger = yes
			}
		}
		
		effect = {
			create_general = { tradition = 75 }
			add_country_modifier = {
				name = lat_soldier_of_christ
				duration = 9125
			}
			set_country_flag = vsg_barrack_buff
			custom_tooltip = VSG_BUILDING_BARRACK
			hidden_effect = {
				every_owned_province = {
					limit = {
						has_manpower_building_trigger = yes
					}
					add_province_modifier = {
						name = vsg_barrack_mod
						duration = -1
					}
				}
			}
		}
	}

	vsg_tercios = {
		icon = spa_reform_tercios
		position = 11
		required_missions = { vsg_mass_mobilization }
		
		trigger = {
			num_of_tercio = 50
			has_global_modifier_value = {
				which = discipline
				value = 0.1
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vsg_visigothic_tercios
				duration = 36500
			}
			set_country_flag = vsg_winning_battle
			custom_tooltip = VSG_WINNING_BATTLE
		}
	}
}

visigoths_fifth = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = VSG
			was_tag = VSG
		}
		has_country_flag = ab_missionswitch_rome_default
	}
	has_country_shield = yes

	vsg_fortify = {
	    icon = alpine_defenses
		required_missions = { }
		position = 1

		ai_weight = {
			factor = 1000
		}
		
		provinces_to_highlight = {
			OR = {
				area = basque_country
				area = aragon_area
				area = catalonia_area
			}
			OR = {
				NOT = { base_manpower = 4 }
				province_has_current_tech_fort_trigger = no
			}
		}
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				basque_country = {
					owned_by = ROOT
				}
				aragon_area = {
					owned_by = ROOT
				}
				catalonia_area = {
					owned_by = ROOT
				}
			}
			else = {
				basque_country = {
					province_has_current_tech_fort_trigger = yes
					base_manpower = 4
				}
				aragon_area = {
					province_has_current_tech_fort_trigger = yes
					base_manpower = 4
				}
				catalonia_area = {
					province_has_current_tech_fort_trigger = yes
					base_manpower = 4
				}
			}
		}
		
		effect = {
			aragon_area = {
				add_province_modifier = {
					name = ibe_fort
					duration = -1
				}
			}
			basque_country = {
				add_province_modifier = {
					name = ibe_fort
					duration = -1
				}
			}
			catalonia_area = {
				add_province_modifier = {
					name = ibe_fort
					duration = -1
				}
			}
		    languedoc_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    pyrenees_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		    guyenne_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	vsg_invade_francia = {
	    icon = mission_invade_occitania
		required_missions = { vsg_fortify }
		position = 2
		
		trigger = {
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				guyenne_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				pyrenees_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				languedoc_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			else = {
				guyenne_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				pyrenees_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				languedoc_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = guyenne_area
				area = languedoc_area
				area = pyrenees_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_yearly_manpower = 2
			add_country_modifier = {
				name = byz_aquitania
				duration = 3650
			}
			provence_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			savoy_dauphine_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			poitou_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			massif_central_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				france_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_visigothic_aquitania = {
	    icon = develop_provence
		required_missions = { vsg_invade_francia }
		position = 3

		ai_weight = {
			factor = 1000
		}
		
		trigger = {
		    provence_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    savoy_dauphine_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		    poitou_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			massif_central_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = provence_area
				area = savoy_dauphine_area
				area = poitou_area
				area = massif_central_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			set_country_flag = vsg_spread_france
			custom_tooltip = VSG_CULTURE_SPREAD_GAUL
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							area = pyrenees_area
							area = guyenne_area
							area = languedoc_area
							area = savoy_dauphine_area
							area = massif_central_area
							area = poitou_area
							area = provence_area
						}
					}
					TLW_culture_conversion_calc_effect = yes
				}
			}
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = vsg_campaign_in_gaul
				duration = 7300
			}
			custom_tooltip = SWA_WIN_WAR_GAIN_STAB
			custom_tooltip = AB_EMPTY
			ile_de_france_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lombardy_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			piedmont_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			emilia_romagna_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			liguria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			po_valley_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_soissons = {
	    icon = carolingian_empire
		required_missions = { vsg_visigothic_aquitania }
		position = 4
		
		trigger = {
		    ile_de_france_area = {
			    type = all
				owned_by = ROOT
			}
		}
		
		provinces_to_highlight = {
			area = ile_de_france_area
			NOT = { owned_by = ROOT }
		}
		
		effect = {
			custom_tooltip = VSG_RELEASE_SOISSONS
			hidden_effect = {
				france_region = {
					limit = {
						owned_by = ROOT
						NOT = { area = pyrenees_area }
						NOT = { area = languedoc_area }
						NOT = { area = guyenne_area }
						NOT = { area = provence_area }
						NOT = { area = savoy_dauphine_area }
						NOT = { area = massif_central_area }
						NOT = { area = poitou_area }
					}
					remove_core = ROOT
					add_core = VSS
				}
				release = VSS
				VSS = {
					change_primary_culture = ROOT
					change_religion = ROOT
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
					}
					add_government_reform = visigothic_kingdom
					change_technology_group = western
					change_unit_type = western
					set_capital = 183
				}
				create_union = VSS
			}
			custom_tooltip = AB_EMPTY
			set_country_flag = vsg_strong_duchies_buff
			custom_tooltip = VSG_STRONG_DUCHIES_PRIVILEGE
			custom_tooltip = AB_EMPTY
			france_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					FRC = {
						humiliated_by = ROOT
					}
				}
				custom_tooltip = GER_HUMILIATE_FRC_YES
				add_prestige_or_monarch_power = {
					amount = 25
				}
			}
			else = {
				custom_tooltip = GER_HUMILIATE_FRC_NO
				tooltip = {
					add_prestige_or_monarch_power = {
						amount = 25
					}
				}
			}
		}
	}

	vsg_conquest_of_france = {
		icon = centralize_france
		required_missions = { vsg_soissons }
		position = 6

		ai_weight = {
			factor = 1000
		}

		trigger = {
			overlord_of = VSS
		    brittany_area = {
			    type = all
				owned_by = VSS
			}
			loire_area = {
			    type = all
				owned_by = VSS
			}
			orleans_area = {
			    type = all
				owned_by = VSS
			}
			west_burgundy_area = {
			    type = all
				owned_by = VSS
			}
			bourgogne_area = {
			    type = all
				owned_by = VSS
			}
			normandy_area = {
			    type = all
				owned_by = VSS
			}
			champagne_area = {
			    type = all
				owned_by = VSS
			}
			lorraine_area = {
			    type = all
				owned_by = VSS
			}
			picardy_area = {
			    type = all
				owned_by = VSS
			}
		}
		
		provinces_to_highlight = {
			OR = {
				area = brittany_area
				area = loire_area
				area = orleans_area
				area = west_burgundy_area
				area = bourgogne_area
				area = normandy_area
				area = champagne_area
				area = lorraine_area
				area = picardy_area
			}
			NOT = { owned_by = VSS }
		}
		
		effect = {
			add_dip_power = 250
			add_country_modifier = {
				name = byzantium_carolingian
				duration = 9125
			}
			cornwall_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = VSS
			}
			wessex_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = VSS
			}
			home_counties_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = VSS
			}
			if = {
				limit = {
					NOT = { hre_size = 1 }
				}
				custom_tooltip = AB_LOT_3_BAI_YES
				add_country_modifier = {
					name = byzantium_bane
					duration = -1
				}
			}
			else = {
				custom_tooltip = AB_LOT_3_BAI_NO
				tooltip = {
					add_country_modifier = {
						name = byzantium_bane
						duration = -1
					}
				}
			}
			if = {
				limit = {
					has_country_flag = ab_stronger_ai_vsg
					ai = yes
				}
				british_isles_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	vsg_invade_britain = {
		icon = mission_control_the_channel
		required_missions = { vsg_conquest_of_france }
		position = 7

		provinces_to_highlight = {
			OR = {
				area = cornwall_area
				area = wessex_area 
				area = home_counties_area
			}
			NOT = { owned_by = VSS }
		}

		trigger = {
			overlord_of = VSS
		    cornwall_area = {
			    type = all
				owned_by = VSS
			}
			wessex_area = {
			    type = all
				owned_by = VSS
			}
			home_counties_area = {
			    type = all
				owned_by = VSS
			}
		}
		
		effect = {
			add_mil_power = 100
			change_government_reform_progress = 100
			custom_tooltip = AB_EMPTY
			add_mercantilism_or_monarch_power = { amount = 5 }
			custom_tooltip = AB_EMPTY
			yorkshire_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
			west_midlands_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
			east_midlands_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
			east_anglia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
			scottish_marches_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
			wales_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = VSS
			}
		}
	}

	vsg_visigothic_britannia = {
		icon = mission_frankishengland
		required_missions = { vsg_invade_britain }
		position = 9

		ai_weight = {
			factor = 1000
		}

		provinces_to_highlight = {
			OR = {
				area = yorkshire_area
				area = west_midlands_area 
				area = east_midlands_area
				area = east_anglia_area
				area = scottish_marches_area 
				area = wales_area
			}
			NOT = { owned_by = VSS }
		}

		trigger = {
			overlord_of = VSS
		    yorkshire_area = {
			    type = all
				owned_by = VSS
			}
			west_midlands_area = {
			    type = all
				owned_by = VSS
			}
			east_midlands_area = {
			    type = all
				owned_by = VSS
			}
			east_anglia_area = {
			    type = all
				owned_by = VSS
			}
			scottish_marches_area = {
			    type = all
				owned_by = VSS
			}
			wales_area = {
			    type = all
				owned_by = VSS
			}
		}
		
		effect = {
			add_absolutism = 20
			add_ruler_personality = augustus_personality
			add_country_modifier = {
				name = vsg_conquest_of_britain
				duration = 18250
			}
			custom_tooltip = SER_JUSTINIAN_PP
			hidden_effect = {
				add_power_projection = {
					type = VSG_perma_pp
					amount = 25
				}
			}
			custom_tooltip = AB_EMPTY
			british_isles_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = {  is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	vsg_firepower_superiority = {
		icon = mission_guns_of_urban
		required_missions = { vsg_mass_mobilization }
		position = 11
		
		trigger = {
			has_global_modifier_value = { 
				which = artillery_power
				value = 0.1
			}
			num_of_artillery = 20
		}
		
		effect = {
			define_advisor = {
				type = siegeengineer
				skill = 3
				cost_multiplier = 0.5
			}
			custom_tooltip = AB_EMPTY
			add_country_modifier = {
				name = rmg_superior_firepower
				duration = 7300
			}
			if = {
				limit = {
					full_idea_group = infrastructure_ideas
				}
				custom_tooltip = BYZ_COMPLETE_INFRA_YES
				add_country_modifier = {
					name = aqt_siege_engines
					duration = -1
				}
			}
			else = {
				custom_tooltip = BYZ_COMPLETE_INFRA_NO
				tooltip = {
					add_country_modifier = {
						name = aqt_siege_engines
						duration = -1
					}
				}
			}
		}
	}
}