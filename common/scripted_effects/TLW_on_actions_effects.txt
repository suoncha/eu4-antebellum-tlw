TLW_on_startup_effect = {
	if = {
		limit = {
			primary_culture = punic
			NOT = { is_year = 1445 }
		}
		country_event = {
			id = ab_punic.1
		}
	}
	else_if = {
		limit = {
			culture_group = iberian
			NOT = { tag = ADU }
			NOT = { is_year = 1445 }
		}
		country_event = {
			id = ab_byzantium.88
		}
	}
}

TLW_on_new_monarch_effect = {
	if = {
		limit = {
			tag = ROM
		}
		if = {
			limit = {
				NOT = { has_country_flag = rome_buffed_augustus }
			}
			add_ruler_personality = augustus_personality
		}
		else = {
			add_ruler_personality = augustus_buffed_personality
		}
	}
}

TLW_on_adm_development_effect = {
	# Rome
	if = {
		limit = {
			province_is_diocese_land_trigger = yes
		}
		if = {
			limit = {
				province_is_latinsphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzlatin
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_hellenosphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzgreek
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_persosphere_trigger = yes
				ROM = {
					has_faction = faction_byzpersian
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzpersian
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_sinosphere_trigger = yes
				ROM = {
					has_faction = faction_byzchinese
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzchinese
					influence = 1
				}
			}
		}
	}
	# Nicaea
	if = {
		limit = {
			has_province_modifier = nci_antigonos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciantigonos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_seleukos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciseleukos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_ptolemaios_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciptolemaios
				influence = 1
			}
		}
	}
}

TLW_on_dip_development_effect = {
	# Rome
	if = {
		limit = {
			province_is_diocese_land_trigger = yes
		}
		if = {
			limit = {
				province_is_latinsphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzlatin
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_hellenosphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzgreek
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_persosphere_trigger = yes
				ROM = {
					has_faction = faction_byzpersian
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzpersian
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_sinosphere_trigger = yes
				ROM = {
					has_faction = faction_byzchinese
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzchinese
					influence = 1
				}
			}
		}
	}
	# Nicaea
	if = {
		limit = {
			has_province_modifier = nci_antigonos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciantigonos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_seleukos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciseleukos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_ptolemaios_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciptolemaios
				influence = 1
			}
		}
	}
}

TLW_on_mil_development_effect = {
	# Rome
	if = {
		limit = {
			province_is_diocese_land_trigger = yes
		}
		if = {
			limit = {
				province_is_latinsphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzlatin
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_hellenosphere_trigger = yes
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzgreek
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_persosphere_trigger = yes
				ROM = {
					has_faction = faction_byzpersian
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzpersian
					influence = 1
				}
			}
		}
		else_if = {
			limit = {
				province_is_sinosphere_trigger = yes
				ROM = {
					has_faction = faction_byzchinese
				}
			}
			ROM = {
				add_faction_influence = {
					faction = faction_byzchinese
					influence = 1
				}
			}
		}
		if = {
			limit = {
				ROM = {
					has_government_mechanic = roman_professionalism_mechanic
				}
			}
			if = {
				limit = {
					owned_by = ROM
				}
				ROM = {
					add_government_power = {
						mechanic_type = roman_professionalism_mechanic
						power_type = romanprofessionalism
						value = 1
					}
				}
			}
			else = {
				ROM = {
					add_government_power = {
						mechanic_type = roman_professionalism_mechanic
						power_type = romanprofessionalism
						value = -1
					}
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_estate_privilege = estate_nobles_theme_system
			}
			has_fort_building_trigger = yes
			base_manpower = 5
		}
		add_province_modifier = {
			name = byz_estate_theme
			duration = -1
		}
	}
	# Nicaea
	if = {
		limit = {
			has_province_modifier = nci_antigonos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciantigonos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_seleukos_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciseleukos
				influence = 1
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = nci_ptolemaios_province
		}
		owner = {
			add_faction_influence = {
				faction = faction_nciptolemaios
				influence = 1
			}
		}
	}
}

TLW_on_new_term_election_effect = {
	if = {
		limit = {
			has_reform = byzromanrepublic
		}
		country_event = {
			id = ab_byzantium.68
		}
	}
}

TLW_on_death_election_effect = {
	if = {
		limit = {
			has_reform = byzromanrepublic
		}
		set_country_flag = byzrepublic_death_election
		country_event = {
			id = ab_byzantium.68
		}
	}
}

TLW_on_siege_won_province_effect = {
	# Rome
	if = {
		limit = {
			controller = {
				is_in_war = {
					casus_belli = cb_roman_persian_war
				}
				war_with = ROM
			}
			superregion = near_east_superregion
			province_is_diocese_land_trigger = yes
		}
		add_core = event_target:crisisPersia
		cede_province = event_target:crisisPersia
	}
	else_if = {
		limit = {
			owner = {
				is_in_war = {
					casus_belli = cb_roman_chinese_war
				}
			}
			controller = {
				is_in_war = {
					casus_belli = cb_roman_chinese_war
				}
			}
			OR = {
				AND = {
					owner = {
						OR = {
							is_subject_of_type_with_overlord = {
								who = ROM
								type = grand_diocese_vassal
							}
							tag = event_target:romanChinaInvasionHorde
						}
						war_with = event_target:EmperorOfChina
					}
					controller = {
						OR = {
							is_emperor_of_china = yes
							tag = event_target:romanChinaInvasionHorde
						}
						war_with = ROM
					}
				}
				AND = {
					owned_by = event_target:EmperorOfChina
					controller = {
						OR = {
							has_country_flag = byz_chinese_war_tributary
							tag = event_target:romanChinaInvasionHorde
						}
						war_with = event_target:EmperorOfChina
					}
				}
				AND = {
					OR = {
						region = korea_region
						owned_by = event_target:romanChinaInvasionKorea
					}
					controller = {
						tag = event_target:romanChinaInvasionJapan
					}
				}
				AND = {
					owned_by = event_target:romanChinaInvasionJapan
					controller = {
						tag = event_target:romanChinaInvasionKorea
					}
				}
			}
		}
		add_core = controller
		cede_province = controller
	}
	else_if = {
		limit = {
			controller = {
				OR = {
					tag = RSL
					tag = RSH
					tag = RSP
					tag = RSS
				}
			}
			ROM = {
				has_disaster = byzantium_biased_cultural_sphere
			}
			province_is_diocese_land_trigger = yes
		}
		add_core = controller
		cede_province = controller
		for = {
			amount = 5
			effect = "
				infantry = controller
			"
		}
	}
	# Nicaea
	if = {
		limit = {
			controller = {
				OR = {
					tag = event_target:hellenicEmpire
					is_subject_of = event_target:hellenicEmpire
				}
				is_in_war = {
					casus_belli = cb_hellenic_conquest
				}
			}
		}
		if = {
			limit = {
				OR = {
					superregion = near_east_superregion
					superregion = persia_superregion
				}
				is_permanent_claim = event_target:hellenicEmpire
			}
			add_core = event_target:hellenicEmpire
		}
		if = {
			limit = {
				event_target:hellenicEmpire = {
					mission_completed = nicene_malta
					overlord_of = HLM
				}
				region = italy_region
			}
			add_permanent_claim = HLM
		}
		if = {
			limit = {
				OR = {
					AND = {
						event_target:hellenicEmpire = {
							mission_completed = nicene_maharajas
						}
						superregion = india_superregion
					}
					AND = {
						event_target:hellenicEmpire = {
							mission_completed = nicene_east_indies
						}
						superregion = east_indies_superregion
					}
					AND = {
						event_target:hellenicEmpire = {
							mission_completed = nicene_arelat
						}
						region = france_region
					}
					AND = {
						event_target:hellenicEmpire = {
							mission_completed = nicene_hercules
						}
						region = iberia_region
					}
				}
			}
			add_permanent_claim = event_target:hellenicEmpire
		}
	}
}

TLW_on_battle_won_country_effect = {
	if = {
		limit = {
			ROM = {
				has_government_mechanic = roman_professionalism_mechanic
			}
		}
		if = {
			limit = {
				tag = ROM
			}
			add_government_power = {
				mechanic_type = roman_professionalism_mechanic
				power_type = romanprofessionalism
				value = 0.5
			}
		}
		else_if = {
			limit = {
				OR = {
					is_subject_of_type_with_overlord = {
						who = ROM
						type = diocese_vassal
					}
					is_subject_of_type_with_overlord = {
						who = ROM
						type = grand_diocese_vassal
					}
				}
			}
			ROM = {
				add_government_power = {
					mechanic_type = roman_professionalism_mechanic
					power_type = romanprofessionalism
					value = -0.5
				}
			}
		}
	}
}

TLW_on_war_won_effect = {
	if = {
		limit = {
			has_country_modifier = byz_reconquest_of_the_levant
			FROM = {
				has_country_modifier = byz_reconquest_of_the_levant_nizzarids
			}
		}
		remove_country_modifier = byz_reconquest_of_the_levant
		FROM = {
			remove_country_modifier = byz_reconquest_of_the_levant_nizzarids
		}
	}
}

TLW_on_war_lost_effect = {
	if = {
		limit = {
			has_country_modifier = byz_reconquest_of_the_levant
			FROM = {
				has_country_modifier = byz_reconquest_of_the_levant_nizzarids
			}
		}
		remove_country_modifier = byz_reconquest_of_the_levant
		FROM = {
			remove_country_modifier = byz_reconquest_of_the_levant_nizzarids
		}
	}
}

TLW_on_general_recruited = {
	if = {
		limit = {
			has_government_mechanic = roman_professionalism_mechanic
		}
		add_government_power = {
			mechanic_type = roman_professionalism_mechanic
			power_type = romanprofessionalism
			value = 1
		}
	}
}

TLW_on_province_owner_change_effect = {
	# Rome
	if = {
		limit = {
			has_great_project = {
				type = any
			}
			ROM = {
				has_reform = byzengineering
			}
		}
		if = {
			limit = {
				province_is_diocese_land_trigger = yes
				NOT = { owned_by = ROM }
			}
			TLW_rome_monument_upgrade_effect = yes
		}
		else = {
			TLW_rome_monument_downgrade_effect = yes
		}
	}
	if = {
		limit = {
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
			NOT = { culture_group = roman_g }
			NOT = { has_province_modifier = byz_unromanized_province }
		}
		remove_province_modifier = byz_romanized_province
		add_province_modifier = {
			name = byz_unromanized_province
			duration = -1
		}
	}
	else_if = {
		limit = {
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
			culture_group = roman_g
			NOT = { has_province_modifier = byz_romanized_province }
		}
		remove_province_modifier = byz_unromanized_province
		add_province_modifier = {
			name = byz_romanized_province
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_modifier = byz_friend_diocese
			}
		}
		add_province_modifier = {
			name = byz_friend_diocese_province
			duration = -1
		}
	}
	# Nicaea
	else_if = {
		limit = {
			owner = {
				has_reform = nicene_hellenic_empire
			}
		}
		random_list = {
			33 = {
				add_province_modifier = {
					name = nci_antigonos_province
					duration = -1
				}
			}
			33 = {
				add_province_modifier = {
					name = nci_seleukos_province
					duration = -1
				}
			}
			33 = {
				add_province_modifier = {
					name = nci_ptolemaios_province
					duration = -1
				}
			}
		}
	}
}

TLW_on_province_culture_changed = {
	# Rome
	if = {
		limit = {
			has_great_project = {
				type = any
				tier = 1
			}
			ROM = {
				has_reform = byzengineering
			}
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
		}
		if = {
			limit = {
				culture_group = roman_g
			}
			TLW_rome_monument_upgrade_effect = yes
		}
		else = {
			TLW_rome_monument_downgrade_effect = yes
		}
	}
	if = {
		limit = {
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
			NOT = { culture_group = roman_g }
			NOT = { has_province_modifier = byz_unromanized_province }
		}
		remove_province_modifier = byz_romanized_province
		add_province_modifier = {
			name = byz_unromanized_province
			duration = -1
		}
	}
	else_if = {
		limit = {
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
			culture_group = roman_g
			NOT = { has_province_modifier = byz_romanized_province }
		}
		remove_province_modifier = byz_unromanized_province
		add_province_modifier = {
			name = byz_romanized_province
			duration = -1
		}
	}
}

TLW_on_province_religion_changed = {
	# Rome
	if = {
		limit = {
			has_great_project = {
				type = any
				tier = 1
			}
			ROM = {
				has_reform = byzengineering
			}
			province_is_diocese_land_trigger = yes
			NOT = { owned_by = ROM }
		}
		if = {
			limit = {
				religion = ROM
			}
			TLW_rome_monument_upgrade_effect = yes
		}
		else = {
			TLW_rome_monument_downgrade_effect = yes
		}
	}
}

TLW_on_dependency_gained_effect = {
	if = {
		limit = {
			has_government_attribute = ab_has_dioceses
			FROM = {
				has_country_flag = byz_independent_diocese
			}
		}
		FROM = {
			clr_country_flag = byz_independent_diocese
			add_government_reform = rom_diocese
		}
	}
}

TLW_on_dependency_lost_effect = {
	if = {
		limit = {
			has_government_attribute = ab_has_dioceses
			FROM = {
				is_subject_of_type_with_overlord = {
					who = ROM
					type = diocese_vassal
				}
			}
		}
		FROM = {
			set_country_flag = byz_independent_diocese
			add_government_reform = rom_former_diocese
		}
	}
}