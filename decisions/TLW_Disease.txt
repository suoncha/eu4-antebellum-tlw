country_decisions = {

	plague_close_the_border = {
		major = yes

		potential = {
			has_country_flag = plague_unlock_decisions
			NOT = { has_country_flag = plague_closed_border }
		}

		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
					}
				}
				has_province_modifier = punic_pale_death_prov
			}
			else = {
				has_province_modifier = punic_gray_fever_prov
			}
			NOT = { owned_by = ROOT }
		}

		allow = {
			hidden_trigger = {
				always = yes
			}
		}

		effect = {
			set_country_flag = plague_closed_border
			add_stability = -1
			add_country_modifier = {
				name = punic_plague_closed_border
				duration = -1
			}
			custom_tooltip = PLAGUE_CLOSE_THE_BORDER
			hidden_effect = {
				add_country_modifier = {
					name = punic_plague_close_border_timer
					duration = 1825
					hidden = yes
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				NOT = {
					any_neighbor_province = {
						has_province_modifier = punic_pale_death_prov
					}
				}
			}
			modifier = {
				factor = 0.25
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 730
					}
				}
			}
			modifier = {
				factor = 0.5
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				had_global_flag = {
					flag = plague_pale_death
					days = 730
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 1825
					}
				}
			}
			modifier = {
				factor = 0.75
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				had_global_flag = {
					flag = plague_pale_death
					days = 1825
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 3650
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				NOT = {
					any_neighbor_province = {
						has_province_modifier = punic_gray_fever_prov
					}
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 730
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				had_global_flag = {
					flag = plague_gray_fever
					days = 730
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 1825
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				had_global_flag = {
					flag = plague_gray_fever
					days = 1825
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 3650
					}
				}
			}
			modifier = {
				factor = 0.25
				NOT = { innovativeness = 10 }
			}
			modifier = {
				factor = 2
				innovativeness = 25
			}
		}
	}

	plague_open_the_border = {
		major = yes

		potential = {
			has_country_flag = plague_closed_border
		}

		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
					}
				}
				has_province_modifier = punic_pale_death_prov
			}
			else = {
				has_province_modifier = punic_gray_fever_prov
			}
			NOT = { owned_by = ROOT }
		}

		allow = {
			if = {
				limit = {
					OR = {
						AND = {
							has_global_flag = plague_pale_death
							capital_scope = {
								OR = {
									continent = north_america
									continent = south_america
								}
							}
						}
						AND = {
							has_global_flag = plague_gray_fever
							NOT = {
								capital_scope = {
									OR = {
										continent = north_america
										continent = south_america
									}
								}
							}
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = PLAGUE_BORDER_CLOSED_5YEARS
					NOT = { has_country_modifier = punic_plague_close_border_timer }
				}
			}
			NOT = { has_country_modifier = punic_plague_enforced_quarantine }
		}

		effect = {
			clr_country_flag = plague_closed_border
			remove_country_modifier = punic_plague_closed_border
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				any_neighbor_province = {
					has_province_modifier = punic_pale_death_prov
				}
			}
			modifier = {
				factor = 0
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				any_neighbor_province = {
					has_province_modifier = punic_gray_fever_prov
				}
			}
		}
	}

	plague_enforce_quarantine = {
		major = yes

		potential = {
			has_country_flag = plague_unlock_decisions
			NOT = { has_country_flag = plague_enforced_quarantine }
		}

		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
					}
				}
				has_province_modifier = punic_pale_death_prov
			}
			else = {
				has_province_modifier = punic_gray_fever_prov
			}
			owned_by = ROOT
		}

		allow = {
			if = {
				limit = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				any_owned_province = {
					has_province_modifier = punic_pale_death_prov
				}
			}
			else = {
				any_owned_province = {
					has_province_modifier = punic_gray_fever_prov
				}
			}
			has_country_modifier = punic_plague_closed_border
		}

		effect = {
			set_country_flag = plague_enforced_quarantine
			add_stability = -1
			add_country_modifier = {
				name = punic_plague_enforced_quarantine
				duration = -1
			}
			custom_tooltip = PLAGUE_ENFORCE_QUARANTINE
			hidden_effect = {
				add_country_modifier = {
					name = punic_plague_enforced_quarantine_timer
					duration = 1825
					hidden = yes
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				NOT = {
					any_owned_province = {
						same_continent = capital
						has_province_modifier = punic_pale_death_prov
					}
				}
			}
			modifier = {
				factor = 0.25
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 730
					}
				}
			}
			modifier = {
				factor = 0.5
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				had_global_flag = {
					flag = plague_pale_death
					days = 730
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 1825
					}
				}
			}
			modifier = {
				factor = 0.75
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				had_global_flag = {
					flag = plague_pale_death
					days = 1825
				}
				NOT = {
					had_global_flag = {
						flag = plague_pale_death
						days = 3650
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				NOT = {
					any_owned_province = {
						same_continent = capital
						has_province_modifier = punic_gray_fever_prov
					}
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 730
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				had_global_flag = {
					flag = plague_gray_fever
					days = 730
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 1825
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				had_global_flag = {
					flag = plague_gray_fever
					days = 1825
				}
				NOT = {
					had_global_flag = {
						flag = plague_gray_fever
						days = 3650
					}
				}
			}
			modifier = {
				factor = 0.25
				NOT = { innovativeness = 10 }
			}
			modifier = {
				factor = 2
				innovativeness = 25
			}
		}
	}

	plague_lift_quarantine = {
		major = yes

		potential = {
			has_country_flag = plague_enforced_quarantine
		}

		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
					}
				}
				has_province_modifier = punic_pale_death_prov
			}
			else = {
				has_province_modifier = punic_gray_fever_prov
			}
			owned_by = ROOT
		}

		allow = {
			if = {
				limit = {
					OR = {
						AND = {
							has_global_flag = plague_pale_death
							capital_scope = {
								OR = {
									continent = north_america
									continent = south_america
								}
							}
						}
						AND = {
							has_global_flag = plague_gray_fever
							NOT = {
								capital_scope = {
									OR = {
										continent = north_america
										continent = south_america
									}
								}
							}
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = PLAGUE_QUARANTINE_ENFORCED_5YEARS
					NOT = { has_country_modifier = punic_plague_enforced_quarantine_timer }
				}
			}
			else = {
				hidden_trigger = {
					always = yes
				}
			}
		}

		effect = {
			clr_country_flag = plague_enforced_quarantine
			remove_country_modifier = punic_plague_enforced_quarantine
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				capital_scope = {
					OR = {
						continent = north_america
						continent = south_america
					}
				}
				any_owned_province = {
					has_province_modifier = punic_pale_death_prov
				}
			}
			modifier = {
				factor = 0
				NOT = {
					capital_scope = {
						OR = {
							continent = north_america
							continent = south_america
						}
					}
				}
				any_owned_province = {
					has_province_modifier = punic_gray_fever_prov
				}
			}
		}
	}

	plague_disable_spawning = {
		major = yes

		potential = {
			ai = no
			NOT = { has_global_flag = AB_DISABLED_PLAGUES }
			NOT = { is_year = 1445 }
		}

		allow = {
			ai = no
		}
		
		effect = {
			set_global_flag = AB_DISABLED_PLAGUES
			custom_tooltip = DISABLE_PLAGUES_TT
		}
	}
}